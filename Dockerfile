FROM node
WORKDIR /app

ENV MYSQL_HOST=ec2-54-237-84-93.compute-1.amazonaws.com
ENV MYSQL_PORT=3307
ENV MYSQL_USER=root
ENV MYSQL_USER_PASSWORD=root
ENV MYSQL_DATABASE=cms
ENV MYSQL_CONNECTION_LIMIT=9

ENV SALT_ROUNDS=10
ENV SECRET_KEY=nqygkOnkrQtHJg47Bhdzg7YtvM
ENV UPLOADS_DIR=uploads
ENV PORT=8000
ENV ALLOWED_HOST=all

COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build

EXPOSE 8000
RUN npm start
